<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<link rel="stylesheet" href="../build/build.css" type="text/css" media="screen" title="no title" charset="utf-8">
<link rel="stylesheet" href="../vendor/font/font-awesome.css">
<link rel="stylesheet" href="../vendor/ContrailOne/ContrailOne.css">
</head>
<body>


<h1 id="working-with-functions">Working with Functions</h1>
<h2 id="abs"><code>abs</code></h2>
<p>In addition to arithmetic operations, GLSL has several built-in mathematical <em>functions</em> that are very useful.</p>
<p>We’ll start with <code>abs</code> which takes the <em>absolute value</em> of a number. It takes negative numbers to the positive version of the number and leaves positive numbers the same.</p>
<div class="evaluator">
abs(-1.5)
</div>

<div class="evaluator">
abs(4.2)
</div>

<div class="evaluator">
abs(0.0)
</div>

<p>Notice how we write <code>abs</code> followed by parentheses with the <em>parameter</em> (the number we want to take the absolute value of) inside. This is how we apply functions in GLSL.</p>
<p>Here is a line graph of <code>abs</code>:</p>
<div class="graph-example">
abs(x)
</div>

<p>In the above graph, <code>x</code> ranges horizontally and the value of the <em>expression</em>, in this case <code>abs(x)</code>, ranges vertically.</p>
<p>Graphs are helpful for visualizing functions so we’ll be using them a lot. Here are a few other examples of graphs:</p>
<div class="graph-example">
x
</div>

<div class="graph-example">
2. * x - 1.
</div>

<!-- <div class="graph-example">-abs(x)</div> -->

<p>The following exercises all use <code>abs</code> to create different graphs.</p>
<div class="graph-exercise">
  <div class="start">
abs(x)
</div>
  <div class="solution">
abs(x) - 1.0
</div>
  <div class="solution">
abs(x - 0.5)
</div>
  <div class="solution">
abs(x - 0.5) * 2.0
</div>
  <div class="solution">
1.0 - abs(x - 0.5) * 2.0
</div>
</div>

<p>Now let’s try using <code>abs</code> in shaders.</p>
<div class="shader-exercise">
<div class="start">

<pre><code>precision mediump float;

varying vec2 position;

void main() {
  gl_FragColor.r = abs(position.x);
  gl_FragColor.g = 0.0;
  gl_FragColor.b = 0.0;
  gl_FragColor.a = 1.0;
}</code></pre>
</div>
<div class="solution">

<pre><code>precision mediump float;

varying vec2 position;

void main() {
  gl_FragColor.r = abs(position.x - 0.5);
  gl_FragColor.g = 0.0;
  gl_FragColor.b = 0.0;
  gl_FragColor.a = 1.0;
}</code></pre>
</div>
<div class="solution">

<pre><code>precision mediump float;

varying vec2 position;

void main() {
  gl_FragColor.r = abs(position.x - 0.5) * 2.0;
  gl_FragColor.g = 0.0;
  gl_FragColor.b = 0.0;
  gl_FragColor.a = 1.0;
}</code></pre>
</div>
<div class="solution">

<pre><code>precision mediump float;

varying vec2 position;

void main() {
  gl_FragColor.r = 1.0 - abs(position.x - 0.5) * 2.0;
  gl_FragColor.g = 0.0;
  gl_FragColor.b = 0.0;
  gl_FragColor.a = 1.0;
}</code></pre>
</div>
<div class="solution">

<pre><code>precision mediump float;

varying vec2 position;

void main() {
  gl_FragColor.r = abs(position.x - 0.5) * 2.0;
  gl_FragColor.g = 0.0;
  gl_FragColor.b = abs(position.y - 0.5) * 2.0;
  gl_FragColor.a = 1.0;
}</code></pre>
</div>
</div>

<p>In the above exercises, you sometimes needed to modify the expression <em>inside</em> the <code>abs</code> function, for example changing <code>abs(x)</code> to <code>abs(x - 0.5)</code>. This is called distorting the <em>domain</em> of the function.</p>
<p>You also sometimes needed to modify the expression <em>outside</em> of the function, for example changing <code>abs(x)</code> to <code>abs(x) - 0.5</code>. This is called distorting the <em>range</em> of the function.</p>
<p>We’ll see this idea–distorting the domain and range of a function–again and again in later chapters. Look out for it!</p>


<script src="../build/build.js"></script>
<script>
require("book");
</script>
</body>
</html>