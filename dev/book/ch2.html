<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<link rel="stylesheet" href="../build/build.css" type="text/css" media="screen" title="no title" charset="utf-8">
<link rel="stylesheet" href="../vendor/font/font-awesome.css">
<link rel="stylesheet" href="../vendor/ContrailOne/ContrailOne.css">
</head>
<body>


<h1 id="working-with-functions">Working with Functions</h1>
<h2 id="abs"><code>abs</code></h2>
<p>In addition to arithmetic operations, GLSL has several built-in mathematical <em>functions</em> that are very useful.</p>
<p>We’ll start with <code>abs</code> which takes the <em>absolute value</em> of a number. It takes negative numbers to the positive version of the number and leaves positive numbers the same.</p>
<div class="evaluator">
abs(-2.)
</div>

<div class="evaluator">
abs(4.)
</div>

<p>Here is a graph of <code>abs</code>:</p>
<div class="graph-example">
abs(x)
</div>

<p>Graphs are helpful for visualizing mathematical expressions so we’ll be using them a lot.</p>
<p>Within the text box on top is an expression based on <code>x</code>. In this case it’s <code>abs(x)</code>. You can experiment by changing the expression in the text box.</p>
<p>On the graph to the left, <code>x</code> goes across horizontally and the result of the expression is graphed vertically. You can move your mouse over the graph to see how the evaluation is carried out (TODO).</p>
<p>Underneath the text box is a breakdown of the expression into sub-expressions. You can move your mouse over these sub-expressions to see their graphs.</p>
<p>Here are a few variations using <code>abs</code>. Explore them by changing them and moving your mouse over them to understand how they work.</p>
<div class="graph-example">
abs(x) + 1.
</div>

<div class="graph-example">
abs(x + 1.)
</div>

<div class="graph-example">
abs(x) * 2.
</div>

<div class="graph-example">
1. - abs(x) * 2.
</div>

<p>Notice how we use arithmetic operations to <em>transform</em> the basic <code>abs(x)</code> graph.</p>
<p>We sometimes do arithmetic <em>inside</em> the function, for example <code>abs(x + 1.)</code>, and sometimes <em>outside</em> the function, for example <code>abs(x) + 1.</code>. Doing operations inside the function is called distorting the <em>domain</em> and doing operations outside the function is called distorting the <em>range</em>.</p>
<p>We’ll see this idea–distorting the domain and range of a function–again and again in the following exercises and later chapters. Look out for it!</p>
<p>Transform <code>abs(x)</code> to construct the red graphs:</p>
<div class="graph-exercise">
  <div class="start">
abs(x)
</div>
  <div class="solution">
abs(x) - 1.0
</div>
  <div class="solution">
abs(x - 0.5)
</div>
  <div class="solution">
abs(x - 0.5) * 2.0
</div>
  <div class="solution">
1.0 - abs(x - 0.5) * 2.0
</div>
</div>

<p>Now let’s try using <code>abs</code> in shaders:</p>
<div class="shader-exercise">
<div class="start">

<pre><code>precision mediump float;

varying vec2 position;

void main() {
  gl_FragColor.r = abs(position.x);
  gl_FragColor.g = 0.0;
  gl_FragColor.b = 0.0;
  gl_FragColor.a = 1.0;
}</code></pre>
</div>
<div class="solution">

<pre><code>precision mediump float;

varying vec2 position;

void main() {
  gl_FragColor.r = abs(position.x - 0.5);
  gl_FragColor.g = 0.0;
  gl_FragColor.b = 0.0;
  gl_FragColor.a = 1.0;
}</code></pre>
</div>
<div class="solution">

<pre><code>precision mediump float;

varying vec2 position;

void main() {
  gl_FragColor.r = abs(position.x - 0.5) * 2.0;
  gl_FragColor.g = 0.0;
  gl_FragColor.b = 0.0;
  gl_FragColor.a = 1.0;
}</code></pre>
</div>
<div class="solution">

<pre><code>precision mediump float;

varying vec2 position;

void main() {
  gl_FragColor.r = 1.0 - abs(position.x - 0.5) * 2.0;
  gl_FragColor.g = 0.0;
  gl_FragColor.b = 0.0;
  gl_FragColor.a = 1.0;
}</code></pre>
</div>
<div class="solution">

<pre><code>precision mediump float;

varying vec2 position;

void main() {
  gl_FragColor.r = abs(position.x - 0.5) * 2.0;
  gl_FragColor.g = 0.0;
  gl_FragColor.b = abs(position.y - 0.5) * 2.0;
  gl_FragColor.a = 1.0;
}</code></pre>
</div>
</div>

<p>In the above exercises, you sometimes needed to modify the expression <em>inside</em> the <code>abs</code> function, for example changing <code>abs(x)</code> to <code>abs(x - 0.5)</code>. This is called distorting the <em>domain</em> of the function.</p>
<p>You also sometimes needed to modify the expression <em>outside</em> of the function, for example changing <code>abs(x)</code> to <code>abs(x) - 0.5</code>. This is called distorting the <em>range</em> of the function.</p>
<p>We’ll see this idea–distorting the domain and range of a function–again and again in later chapters. Look out for it!</p>


<script src="../build/build.js"></script>
<script>
require("book");
</script>
</body>
</html>